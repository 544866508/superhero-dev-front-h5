(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"111f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page",on:{touchmove:function(e){e=t.$handleEvent(e),t.handletouchmove(e)},touchstart:function(e){e=t.$handleEvent(e),t.handletouchstart(e)},touchend:function(e){e=t.$handleEvent(e),t.handletouchend(e)}}},[a("v-uni-view",{staticClass:"search-block"},[a("v-uni-view",{staticClass:"search-ico-wapper"},[a("v-uni-image",{staticClass:"search-ico",attrs:{src:"../../static/icos/search.png"}})],1),a("v-uni-input",{staticClass:"search-txt",attrs:{type:"text",placeholder:"搜索预告",maxlength:"10","confirm-type":"search"},on:{confirm:function(e){e=t.$handleEvent(e),t.searchFilm(e)}}})],1),a("v-uni-view",{staticClass:"movie-list page-block"},t._l(t.searchFilmList,function(e,i){return a("v-uni-view",{key:i,staticClass:"movie-wapper"},[a("v-uni-image",{staticClass:"poster-img",attrs:{src:e.cover,"data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}})],1)}),1)],1)},n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},1865:function(t,e,a){e=t.exports=a("2350")(!1),e.push([t.i,"/* 搜索框 start */.search-ico[data-v-1eb06ab1]{width:%?40?%;height:%?40?%}.search-txt[data-v-1eb06ab1]{font-size:14px;background-color:#eaeaea;height:%?60?%;width:%?650?%}.search-block[data-v-1eb06ab1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding:%?0?% %?20?% %?20?% %?20?%;\r\n\t/* 固定搜索栏 */position:fixed;top:100;z-index:2000;background-color:#f8f8f8}.search-ico-wapper[data-v-1eb06ab1]{background-color:#eaeaea;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;padding:%?0?% %?10?% %?0?% %?10?%}\r\n/* 搜索框 end */\r\n/* 预告片列表 start */.poster-img[data-v-1eb06ab1]{width:%?200?%;height:%?270?%}.movie-list[data-v-1eb06ab1]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:%?100?% %?10?% %?0?% %?10?%}.movie-wapper[data-v-1eb06ab1]{padding:%?10?% %?20?%}\r\n/* 预告片列表 end */",""])},8625:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{searchFilmList:[],flag:0,lastX:0,lastY:0}},onLoad:function(){this.getAllFilm()},methods:{showMovie:function(t){var e=t.currentTarget.dataset.movieid;uni.navigateTo({url:"../movie/movie?movieId="+e})},getAllFilm:function(){var t=this;uni.showLoading({mask:!0,title:"努力加载中..."}),uni.showNavigationBarLoading(),uni.request({url:this.apiServer+"api/v1/get/all_film/",method:"GET",success:function(e){for(var a in e.data)e.data[a].cover=t.mediaServer+e.data[a].cover;for(var a in e.data)t.searchFilmList.push(e.data[a])},fail:function(t){console.log(t)},complete:function(){uni.hideLoading(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()}})},searchFilm:function(t){var e=this;this.searchFilmList=[];var a=t.detail.value;a?(uni.showLoading({mask:!0,title:"努力加载中..."}),uni.showNavigationBarLoading(),uni.request({url:this.apiServer+"api/v1/get/search/",method:"GET",data:{keyword:a},success:function(t){for(var a in t.data)for(var i in t.data[a].cover=e.mediaServer+t.data[a].cover,t.data[a].trailer=e.mediaServer+t.data[a].trailer,t.data[a].poster)t.data[a].poster[i].poster=e.mediaServer+t.data[a].poster[i].poster;for(var a in t.data)e.searchFilmList.push(t.data[a])},fail:function(t){console.log(t)},complete:function(){uni.hideLoading(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()}})):this.getAllFilm()},handletouchmove:function(t){if(0===this.flag){var e=t.touches[0].pageX,a=t.touches[0].pageY,i=e-this.lastX,n=a-this.lastY;this.mindex=-1,Math.abs(i)>Math.abs(n)&&Math.abs(i)>30&&(i<0?(this.flag=1,console.log("向左滑动"),uni.switchTab({url:"../me/me"})):i>0&&(this.flag=2,console.log("向右滑动"),uni.switchTab({url:"../index/index"}))),this.lastX=e,this.lastY=a}},handletouchstart:function(t){this.lastX=t.touches[0].pageX,this.lastY=t.touches[0].pageY},handletouchend:function(t){this.flag=0}}};e.default=i},af49:function(t,e,a){"use strict";a.r(e);var i=a("111f"),n=a("b740");for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);a("e722");var r=a("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"1eb06ab1",null);e["default"]=s.exports},b740:function(t,e,a){"use strict";a.r(e);var i=a("8625"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);e["default"]=n.a},c9cf:function(t,e,a){var i=a("1865");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("5c45d0a8",i,!0,{sourceMap:!1,shadowMode:!1})},e722:function(t,e,a){"use strict";var i=a("c9cf"),n=a.n(i);n.a}}]);