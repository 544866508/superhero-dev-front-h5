(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"074d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page",on:{touchmove:function(e){e=t.$handleEvent(e),t.handletouchmove(e)},touchstart:function(e){e=t.$handleEvent(e),t.handletouchstart(e)},touchend:function(e){e=t.$handleEvent(e),t.handletouchend(e)}}},[i("v-uni-swiper",{staticClass:"carousel",staticStyle:{"background-color":"#333333"},attrs:{"indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3}},t._l(t.swiperList,function(e,a){return i("v-uni-swiper-item",{key:a},[i("v-uni-image",{staticClass:"carousel",attrs:{src:e.swiper_img,mode:"aspectFill","data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}})],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/hot.png"}}),i("v-uni-view",{staticClass:"hot-title"},[t._v("最新上映")])],1)],1),i("v-uni-scroll-view",{staticClass:"pageblock nowrap",attrs:{"scroll-x":"true"}},t._l(t.newFilmList,function(e,a){return i("v-uni-view",{key:a,staticClass:"poster"},[i("v-uni-view",{staticClass:"poster-wapper"},[i("v-uni-image",{staticClass:"poster-img",attrs:{src:e.cover,"data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}}),i("v-uni-view",{staticClass:"movie-name"},[t._v(t._s(e.name))]),i("scoreComp",{attrs:{score:e.score}})],1)],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/interest.png"}}),i("v-uni-view",{staticClass:"hot-title"},[t._v("热门影片")])],1)],1),i("v-uni-scroll-view",{staticClass:"pageblock nowrap",attrs:{"scroll-x":"true"}},t._l(t.hotFilmList,function(e,a){return i("v-uni-view",{key:a,staticClass:"poster"},[i("v-uni-view",{staticClass:"poster-wapper"},[i("v-uni-image",{staticClass:"poster-img",attrs:{src:e.cover,"data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}}),i("v-uni-view",{staticClass:"movie-name"},[t._v(t._s(e.name))]),i("v-uni-view",{staticClass:"praise-font"},[t._v(t._s(e.prised_count)+"人收藏")])],1)],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/guess-u-like.png"}}),i("v-uni-view",{staticClass:"hot-title"},[t._v("猜你喜欢")])],1)],1),i("v-uni-view",{staticClass:"guess-u-like page-block"},t._l(t.guessFilmList,function(e,a){return i("v-uni-view",{key:a,staticClass:"guess-u-like-movie"},[i("v-uni-image",{staticClass:"like-movie",attrs:{src:e.cover,"data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}}),i("v-uni-view",{staticClass:"movie-desc",attrs:{"data-movieId":e.id},on:{click:function(e){e=t.$handleEvent(e),t.showMovie(e)}}},[i("v-uni-view",{staticClass:"movie-title"},[t._v(t._s(e.name))]),i("scoreComp",{attrs:{score:e.score}}),i("v-uni-view",{staticClass:"movie-info"},[t._v(t._s(e.basic_info))]),i("v-uni-view",{staticClass:"movie-info"},[t._v(t._s(e.release_date)+"("+t._s(e.release_place)+")")])],1),e.isInterest?i("v-uni-view",{staticClass:"movie-oper",attrs:{"data-index":a},on:{click:function(e){e=t.$handleEvent(e),t.interestMe(e)}}},[i("v-uni-image",{staticClass:"praise-ico",attrs:{src:"/static/icos/star-gray.png"}}),i("v-uni-view",{staticClass:"praise-gray-txt"},[t._v("已收藏")])],1):i("v-uni-view",{staticClass:"movie-oper",attrs:{"data-index":a},on:{click:function(e){e=t.$handleEvent(e),t.interestMe(e)}}},[i("v-uni-image",{staticClass:"praise-ico",attrs:{src:"/static/icos/star-yellow.png"}}),i("v-uni-view",{staticClass:"praise-txt"},[t._v("收藏")])],1)],1)}),1)],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},1814:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"/* 轮播图 */.carousel[data-v-5d1332f4]{width:100%;height:%?440?%}\r\n/* 最新上映 */.hot-movie[data-v-5d1332f4]{margin-top:%?12?%;padding:%?20?%}.hot-title-wapper[data-v-5d1332f4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.hot-ico[data-v-5d1332f4]{width:%?30?%;height:%?30?%;margin-top:%?20?%}.hot-title[data-v-5d1332f4]{font-size:20px;margin-left:%?20?%;font-weight:700}.nowrap[data-v-5d1332f4]{width:100%;white-space:nowrap}.poster[data-v-5d1332f4]{display:inline-block;margin-left:%?20?%}.poster-wapper[data-v-5d1332f4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.poster-img[data-v-5d1332f4]{width:%?200?%;height:%?270?%}.movie-name[data-v-5d1332f4]{width:%?200?%;margin-top:%?10?%;font-size:14px;font-weight:700;\r\n\t/* 过长的名字添加省略号 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}\r\n/* 热门预告 */.hot-announce-movie[data-v-5d1332f4]{display:inline-block;padding:%?0?% %?20?% %?20?% %?20?%}.movie[data-v-5d1332f4]{width:%?350?%;height:%?220?%;margin-top:%?10?%;margin-right:%?20?%}\r\n/* 猜你喜欢 */.guess-u-like[data-v-5d1332f4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.guess-u-like-movie[data-v-5d1332f4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?30?% %?20?%}.like-movie[data-v-5d1332f4]{width:%?180?%;height:%?240?%;border-radius:3%}.movie-desc[data-v-5d1332f4]{width:%?340?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-top:%?10?%}.movie-title[data-v-5d1332f4]{\r\n\t/* 过长的名字添加省略号 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;margin-top:%?10?%}.movie-info[data-v-5d1332f4]{color:grey;font-size:14px;margin-top:%?10?%;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}\r\n/* 点赞css */.movie-oper[data-v-5d1332f4]{width:%?140?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-left:dashed 2px;border-left-color:#dbdbda}.praise-ico[data-v-5d1332f4]{width:%?40?%;height:%?40?%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.praise-gray-txt[data-v-5d1332f4]{font-size:14px;color:grey;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.praise-txt[data-v-5d1332f4]{font-size:14px;color:#feab2a;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.animation-opacity[data-v-5d1332f4]{opacity:0}.praise-font[data-v-5d1332f4]{font-size:12px;color:grey;margin-left:%?8?%}",""])},3872:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"movie-score-wapper"},[t._l(t.starNum,function(e,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:t.starYellow}})}),t._l(5-t.starNum,function(e,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:t.starGray}})}),i("v-uni-view",{staticClass:"movie-score"},[t._v(t._s(t.score))])],2)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},3970:function(t,e,i){var a=i("6387");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("54427197",a,!0,{sourceMap:!1,shadowMode:!1})},"52e5":function(t,e,i){"use strict";i.r(e);var a=i("3872"),s=i("7bea");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("bfbc");var n=i("2877"),r=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"0ba240d8",null);e["default"]=r.exports},5824:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("6b54"),i("87b3"),i("28a5");var s=a(i("52e5")),o={data:function(){return{swiperList:[],hotFilmList:[],newFilmList:[],guessFilmList:[],flag:0,lastX:0,lastY:0}},onPullDownRefresh:function(){this.getHotFilmAndNewFilm(),this.getGuessFilm()},onShow:function(){this.getGuessFilm()},onUnload:function(){this.animationData={}},onLoad:function(){var t=this;this.adnimation=uni.createAnimation({}),uni.request({url:this.apiServer+"api/v1/get/swiper/",method:"GET",success:function(e){for(var i in e.data)e.data[i].swiper_img=t.mediaServer+e.data[i].swiper_img;t.swiperList=e.data,console.log(t.swiperList)},fail:function(t){console.log(t)}}),this.getHotFilmAndNewFilm()},methods:{getHotFilmAndNewFilm:function(){var t=this;uni.showLoading({mask:!0,title:"努力加载中..."}),uni.showNavigationBarLoading(),this.hotFilmList=[],this.newFilmList=[],uni.request({url:this.apiServer+"api/v1/get/hot_film/",method:"GET",success:function(e){for(var i in e.data)e.data[i].cover=t.mediaServer+e.data[i].cover,t.hotFilmList.push(e.data[i]);console.log(t.hotFilmList)},fail:function(t){console.log(t)}}),uni.request({url:this.apiServer+"api/v1/get/new_film/",method:"GET",success:function(e){for(var i in e.data)e.data[i].cover=t.mediaServer+e.data[i].cover,t.newFilmList.push(e.data[i]);console.log(t.newFilmList)},fail:function(t){console.log(t)}}),uni.hideLoading(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()},showMovie:function(t){var e=t.currentTarget.dataset.movieid;uni.navigateTo({url:"../movie/movie?movieId="+e})},interestMe:function(t){var e=t.currentTarget.dataset.index;this.guessFilmList[e].isInterest=!this.guessFilmList[e].isInterest,this.guessFilmList[e].isInterest?this.myInterest(this.guessFilmList[e].id):this.nomoralInterest(this.guessFilmList[e].id)},getGuessFilm:function(){var t=this;uni.request({url:this.apiServer+"api/v1/get/guessfilm/",method:"GET",success:function(e){var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");for(var s in e.data)e.data[s].cover=t.mediaServer+e.data[s].cover,a.indexOf(e.data[s].id.toString())>-1?e.data[s].isInterest=!0:e.data[s].isInterest=!1;t.guessFilmList=e.data,console.log("猜你喜欢对象："),console.log(t.guessFilmList)},fail:function(t){console.log(t)}})},myInterest:function(t){var e=this;uni.showToast({title:"已收藏",icon:"none"});var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");a.push(t),uni.setStorageSync("INTEREST_FILM_ID",a+"");var s=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},data:{user_id:s,movie_id:t},success:function(t){200!=t.data.status&&400==t.data.status&&e.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},nomoralInterest:function(t){var e=this;uni.showToast({title:"已取消收藏",icon:"none"});var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");a=this.deleteByValue(a,t);uni.setStorageSync("INTEREST_FILM_ID",a+"");var s=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/?user_id="+s+"&movie_id="+t,method:"DELETE",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},success:function(t){200!=t.data.status&&400==t.data.status&&e.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},deleteByValue:function(t,e){for(var i=0;i<t.length;i++)e==t[i]&&t.splice(i,1);return t},handletouchmove:function(t){if(0===this.flag){var e=t.touches[0].pageX,i=t.touches[0].pageY,a=e-this.lastX,s=i-this.lastY;this.mindex=-1,Math.abs(a)>Math.abs(s)&&(a<0?(this.flag=1,console.log("向左滑动"),uni.switchTab({url:"../search/search"})):a>0&&(this.flag=2,console.log("向右滑动"))),this.lastX=e,this.lastY=i}},handletouchstart:function(t){this.lastX=t.touches[0].pageX,this.lastY=t.touches[0].pageY},handletouchend:function(t){this.flag=0}},components:{scoreComp:s.default}};e.default=o},"5e23":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("e814")),o={name:"scoreComp",data:function(){return{starNum:0,starYellow:this.mediaServer+"/media/star-yellow.png",starGray:this.mediaServer+"/media/star-gray.png"}},props:{score:0},created:function(){this.starNum=(0,s.default)(this.score/2)}};e.default=o},"62e0":function(t,e,i){var a=i("1814");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("5ff0089a",a,!0,{sourceMap:!1,shadowMode:!1})},6387:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".movie-score-wapper[data-v-0ba240d8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.star-ico[data-v-0ba240d8]{width:%?25?%;height:%?25?%;margin-left:%?6?%;margin-top:%?6?%}.movie-score[data-v-0ba240d8]{font-size:12px;color:grey;margin-left:%?8?%}",""])},"7bea":function(t,e,i){"use strict";i.r(e);var a=i("5e23"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a},"98e4":function(t,e,i){"use strict";i.r(e);var a=i("074d"),s=i("fbde");for(var o in s)"default"!==o&&function(t){i.d(e,t,function(){return s[t]})}(o);i("e9af");var n=i("2877"),r=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"5d1332f4",null);e["default"]=r.exports},bfbc:function(t,e,i){"use strict";var a=i("3970"),s=i.n(a);s.a},e9af:function(t,e,i){"use strict";var a=i("62e0"),s=i.n(a);s.a},fbde:function(t,e,i){"use strict";i.r(e);var a=i("5824"),s=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);e["default"]=s.a}}]);