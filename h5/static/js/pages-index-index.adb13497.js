(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0577":function(e,t,i){var a=i("d0ca");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("ec079bee",a,!0,{sourceMap:!1,shadowMode:!1})},3872:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"movie-score-wapper"},[e._l(e.starNum,function(t,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:e.starYellow}})}),e._l(5-e.starNum,function(t,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:e.starGray}})}),i("v-uni-view",{staticClass:"movie-score"},[e._v(e._s(e.score))])],2)},s=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},3970:function(e,t,i){var a=i("6387");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var s=i("4f06").default;s("54427197",a,!0,{sourceMap:!1,shadowMode:!1})},"49be":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"page",on:{touchmove:function(t){t=e.$handleEvent(t),e.handletouchmove(t)},touchstart:function(t){t=e.$handleEvent(t),e.handletouchstart(t)},touchend:function(t){t=e.$handleEvent(t),e.handletouchend(t)}}},[i("v-uni-swiper",{staticClass:"carousel",staticStyle:{"background-color":"#333333"},attrs:{"indicator-dots":!0,autoplay:!0,interval:3e3,duration:1e3}},e._l(e.swiperList,function(t,a){return i("v-uni-swiper-item",{key:a},[i("v-uni-image",{staticClass:"carousel",attrs:{src:t.swiper_img,mode:"aspectFill","data-movieId":t.id},on:{click:function(t){t=e.$handleEvent(t),e.showMovie(t)}}})],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/hot.png"}}),i("v-uni-view",{staticClass:"hot-title"},[e._v("最新上映")])],1)],1),i("v-uni-scroll-view",{staticClass:"pageblock nowrap",attrs:{"scroll-x":"true"}},e._l(e.newFilmList,function(t,a){return i("v-uni-view",{key:a,staticClass:"poster"},[i("v-uni-view",{staticClass:"poster-wapper"},[i("v-uni-image",{staticClass:"poster-img",attrs:{src:t.cover,"data-movieId":t.id},on:{click:function(t){t=e.$handleEvent(t),e.showMovie(t)}}}),i("v-uni-view",{staticClass:"movie-name"},[e._v(e._s(t.name))]),i("scoreComp",{attrs:{score:t.score}})],1)],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/interest.png"}}),i("v-uni-view",{staticClass:"hot-title"},[e._v("热门影片")])],1)],1),i("v-uni-scroll-view",{staticClass:"pageblock nowrap",attrs:{"scroll-x":"true"}},e._l(e.hotFilmList,function(t,a){return i("v-uni-view",{key:a,staticClass:"poster"},[i("v-uni-view",{staticClass:"poster-wapper"},[i("v-uni-image",{staticClass:"poster-img",attrs:{src:t.cover,"data-movieId":t.id},on:{click:function(t){t=e.$handleEvent(t),e.showMovie(t)}}}),i("v-uni-view",{staticClass:"movie-name"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"praise-font"},[e._v(e._s(t.prised_count)+"人收藏")])],1)],1)}),1),i("v-uni-view",{staticClass:"page-block hot-movie"},[i("v-uni-view",{staticClass:"hot-title-wapper"},[i("v-uni-image",{staticClass:"hot-ico",attrs:{src:"../../static/icos/guess-u-like.png"}}),i("v-uni-view",{staticClass:"hot-title"},[e._v("猜你喜欢")])],1)],1),i("v-uni-view",{staticClass:"guess-u-like page-block"},e._l(e.guessFilmList,function(t,a){return i("v-uni-view",{key:a,staticClass:"guess-u-like-movie"},[i("v-uni-image",{staticClass:"like-movie",attrs:{src:t.cover,"data-movieId":t.id},on:{click:function(t){t=e.$handleEvent(t),e.showMovie(t)}}}),i("v-uni-view",{staticClass:"movie-desc",attrs:{"data-movieId":t.id},on:{click:function(t){t=e.$handleEvent(t),e.showMovie(t)}}},[i("v-uni-view",{staticClass:"movie-title"},[e._v(e._s(t.name))]),i("scoreComp",{attrs:{score:t.score}}),i("v-uni-view",{staticClass:"movie-info"},[e._v(e._s(t.basic_info))]),i("v-uni-view",{staticClass:"movie-info"},[e._v(e._s(t.release_date)+"("+e._s(t.release_place)+")")])],1),t.isInterest?i("v-uni-view",{staticClass:"movie-oper",attrs:{"data-index":a},on:{click:function(t){t=e.$handleEvent(t),e.interestMe(t)}}},[i("v-uni-image",{staticClass:"praise-ico",attrs:{src:"/static/icos/star-gray.png"}}),i("v-uni-view",{staticClass:"praise-gray-txt"},[e._v("已收藏")])],1):i("v-uni-view",{staticClass:"movie-oper",attrs:{"data-index":a},on:{click:function(t){t=e.$handleEvent(t),e.interestMe(t)}}},[i("v-uni-image",{staticClass:"praise-ico",attrs:{src:"/static/icos/star-yellow.png"}}),i("v-uni-view",{staticClass:"praise-txt"},[e._v("收藏")])],1)],1)}),1)],1)},s=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return s})},"52e5":function(e,t,i){"use strict";i.r(t);var a=i("3872"),s=i("7bea");for(var o in s)"default"!==o&&function(e){i.d(t,e,function(){return s[e]})}(o);i("bfbc");var n=i("2877"),r=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"0ba240d8",null);t["default"]=r.exports},5824:function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("6b54"),i("87b3"),i("28a5");var s=a(i("52e5")),o={data:function(){return{swiperList:[],hotFilmList:[],newFilmList:[],guessFilmList:[],flag:0,lastX:0,lastY:0}},onPullDownRefresh:function(){this.getHotFilmAndNewFilm(),this.getGuessFilm()},onShow:function(){this.getGuessFilm()},onUnload:function(){this.animationData={}},onLoad:function(){var e=this;this.adnimation=uni.createAnimation({}),uni.request({url:this.apiServer+"api/v1/get/swiper/",method:"GET",success:function(t){for(var i in t.data)t.data[i].swiper_img=e.mediaServer+t.data[i].swiper_img;e.swiperList=t.data,console.log(e.swiperList)},fail:function(e){console.log(e)}}),this.getHotFilmAndNewFilm()},methods:{getHotFilmAndNewFilm:function(){var e=this;uni.showLoading({mask:!0,title:"努力加载中..."}),uni.showNavigationBarLoading(),this.hotFilmList=[],this.newFilmList=[],uni.request({url:this.apiServer+"api/v1/get/hot_film/",method:"GET",success:function(t){for(var i in t.data)t.data[i].cover=e.mediaServer+t.data[i].cover,e.hotFilmList.push(t.data[i]);console.log(e.hotFilmList)},fail:function(e){console.log(e)}}),uni.request({url:this.apiServer+"api/v1/get/new_film/",method:"GET",success:function(t){for(var i in t.data)t.data[i].cover=e.mediaServer+t.data[i].cover,e.newFilmList.push(t.data[i]);console.log(e.newFilmList)},fail:function(e){console.log(e)}}),uni.hideLoading(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()},showMovie:function(e){var t=e.currentTarget.dataset.movieid;uni.navigateTo({url:"../movie/movie?movieId="+t})},interestMe:function(e){if(uni.getStorageSync("IS_LOGIN")){var t=e.currentTarget.dataset.index;this.guessFilmList[t].isInterest=!this.guessFilmList[t].isInterest,this.guessFilmList[t].isInterest?this.myInterest(this.guessFilmList[t].id):this.nomoralInterest(this.guessFilmList[t].id)}else{uni.showModal({title:"提示",content:"登录后才能进行收藏操作，去登录吗？",success:function(e){e.confirm&&uni.switchTab({url:"/pages/me/me"})}})}},getGuessFilm:function(){var e=this;uni.request({url:this.apiServer+"api/v1/get/guessfilm/",method:"GET",success:function(t){var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");for(var s in t.data)t.data[s].cover=e.mediaServer+t.data[s].cover,a.indexOf(t.data[s].id.toString())>-1?t.data[s].isInterest=!0:t.data[s].isInterest=!1;e.guessFilmList=t.data,console.log("猜你喜欢对象："),console.log(e.guessFilmList)},fail:function(e){console.log(e)}})},myInterest:function(e){var t=this;uni.showToast({title:"已收藏",icon:"none"});var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");a.push(e),uni.setStorageSync("INTEREST_FILM_ID",a+"");var s=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},data:{user_id:s,movie_id:e},success:function(e){200!=e.data.status&&400==e.data.status&&t.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},nomoralInterest:function(e){var t=this;uni.showToast({title:"已取消收藏",icon:"none"});var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");a=this.deleteByValue(a,e);uni.setStorageSync("INTEREST_FILM_ID",a+"");var s=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/?user_id="+s+"&movie_id="+e,method:"DELETE",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},success:function(e){200!=e.data.status&&400==e.data.status&&t.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},deleteByValue:function(e,t){for(var i=0;i<e.length;i++)t==e[i]&&e.splice(i,1);return e},handletouchmove:function(e){if(0===this.flag){var t=e.touches[0].pageX,i=e.touches[0].pageY,a=t-this.lastX,s=i-this.lastY;this.mindex=-1,Math.abs(a)>Math.abs(s)&&Math.abs(a)>30&&(a<0?(this.flag=1,console.log("向左滑动"),uni.switchTab({url:"../search/search"})):a>0&&(this.flag=2,console.log("向右滑动"))),this.lastX=t,this.lastY=i}},handletouchstart:function(e){this.lastX=e.touches[0].pageX,this.lastY=e.touches[0].pageY},handletouchend:function(e){this.flag=0}},components:{scoreComp:s.default}};t.default=o},"5e23":function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=a(i("e814")),o={name:"scoreComp",data:function(){return{starNum:0,starYellow:this.mediaServer+"/media/star-yellow.png",starGray:this.mediaServer+"/media/star-gray.png"}},props:{score:0},created:function(){this.starNum=(0,s.default)(this.score/2)}};t.default=o},6387:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".movie-score-wapper[data-v-0ba240d8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.star-ico[data-v-0ba240d8]{width:%?25?%;height:%?25?%;margin-left:%?6?%;margin-top:%?6?%}.movie-score[data-v-0ba240d8]{font-size:12px;color:grey;margin-left:%?8?%}",""])},"7bea":function(e,t,i){"use strict";i.r(t);var a=i("5e23"),s=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=s.a},"974b":function(e,t,i){"use strict";var a=i("0577"),s=i.n(a);s.a},"98e4":function(e,t,i){"use strict";i.r(t);var a=i("49be"),s=i("fbde");for(var o in s)"default"!==o&&function(e){i.d(t,e,function(){return s[e]})}(o);i("974b");var n=i("2877"),r=Object(n["a"])(s["default"],a["a"],a["b"],!1,null,"b16ecee4",null);t["default"]=r.exports},bfbc:function(e,t,i){"use strict";var a=i("3970"),s=i.n(a);s.a},d0ca:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"/* 轮播图 */.carousel[data-v-b16ecee4]{width:100%;height:%?440?%}\r\n/* 最新上映 */.hot-movie[data-v-b16ecee4]{margin-top:%?12?%;padding:%?20?%}.hot-title-wapper[data-v-b16ecee4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.hot-ico[data-v-b16ecee4]{width:%?30?%;height:%?30?%;margin-top:%?20?%}.hot-title[data-v-b16ecee4]{font-size:20px;margin-left:%?20?%;font-weight:700}.nowrap[data-v-b16ecee4]{width:100%;white-space:nowrap}.poster[data-v-b16ecee4]{display:inline-block;margin-left:%?20?%}.poster-wapper[data-v-b16ecee4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.poster-img[data-v-b16ecee4]{width:%?200?%;height:%?270?%}.movie-name[data-v-b16ecee4]{width:%?200?%;margin-top:%?10?%;font-size:14px;font-weight:700;\r\n\t/* 过长的名字添加省略号 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}\r\n/* 热门预告 */.hot-announce-movie[data-v-b16ecee4]{display:inline-block;padding:%?0?% %?20?% %?20?% %?20?%}.movie[data-v-b16ecee4]{width:%?350?%;height:%?220?%;margin-top:%?10?%;margin-right:%?20?%}\r\n/* 猜你喜欢 */.guess-u-like[data-v-b16ecee4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.guess-u-like-movie[data-v-b16ecee4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:%?30?% %?20?%}.like-movie[data-v-b16ecee4]{width:%?180?%;height:%?240?%;border-radius:3%}.movie-desc[data-v-b16ecee4]{width:%?340?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-top:%?10?%}.movie-title[data-v-b16ecee4]{\r\n\t/* 过长的名字添加省略号 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;margin-top:%?10?%}.movie-info[data-v-b16ecee4]{color:grey;font-size:14px;margin-top:%?10?%;white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}\r\n/* 点赞css */.movie-oper[data-v-b16ecee4]{width:%?140?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;border-left:dashed 2px;border-left-color:#dbdbda}.praise-ico[data-v-b16ecee4]{width:%?40?%;height:%?40?%;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.praise-gray-txt[data-v-b16ecee4]{font-size:14px;color:grey;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.praise-txt[data-v-b16ecee4]{font-size:14px;color:#feab2a;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center}.animation-opacity[data-v-b16ecee4]{opacity:0}.praise-font[data-v-b16ecee4]{font-size:12px;color:grey;margin-left:%?8?%}",""])},fbde:function(e,t,i){"use strict";i.r(t);var a=i("5824"),s=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=s.a}}]);