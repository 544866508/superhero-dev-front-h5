(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-movie-movie"],{"12cf":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".movie[data-v-0c2980e4]{width:100%;height:%?440?%}\r\n\r\n/* 影片基本信息 start */.movie-info[data-v-0c2980e4]{padding:%?40?% %?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;background-color:#f7f4f9}.cover[data-v-0c2980e4]{width:%?280?%;height:%?380?%}.movie-desc[data-v-0c2980e4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-left:%?30?%;width:%?400?%}.title[data-v-0c2980e4]{font-size:20px}.basic-info[data-v-0c2980e4]{color:#a9a9a9;font-size:13px;line-height:%?36?%;\r\n\t/* 不换行 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}\r\n\r\n/* 影片基本信息 end */\r\n\r\n/* 评分块 start */.score-block[data-v-0c2980e4]{background-color:#fff;margin-top:%?20?%;width:%?360?%;height:%?90?%;padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;\r\n\t/* 阴影效果 x轴 y轴 模糊值 颜色 */-webkit-box-shadow:3px 2px 10px #dedede;box-shadow:3px 2px 10px #dedede}.score-words[data-v-0c2980e4]{font-size:12px;color:grey}.movie-score[data-v-0c2980e4]{font-size:26px;font-weight:700;margin-left:%?8?%;color:#feab2a}\r\n\r\n/* 评分块 end */\r\n\r\n/* 剧情介绍 start */.plots-block[data-v-0c2980e4]{background-color:#fff;padding:%?20?% %?40?%}.plots-title[data-v-0c2980e4]{color:#a9a9a9;font-size:14px}.plots-desc[data-v-0c2980e4]{margin-top:%?10?%;font-size:12px}.plots-wapper[data-v-0c2980e4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}\r\n\r\n/* 剧情介绍 end */\r\n\r\n/* 演职人员 start */.nowrap[data-v-0c2980e4]{width:100%;white-space:nowrap}.actor[data-v-0c2980e4]{display:inline-block;margin-left:%?20?%}.actor-wapper[data-v-0c2980e4]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.actor-name[data-v-0c2980e4]{width:%?200?%;margin-top:%?10?%;font-size:12px;\r\n\t/* 不换行 */white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis}.actor-photo[data-v-0c2980e4]{margin-top:%?10?%;width:%?200?%;height:%?270?%}\r\n\r\n/* 演职人员 end */",""])},1736:function(t,e,i){"use strict";var a=i("2917"),o=i.n(a);o.a},2917:function(t,e,i){var a=i("12cf");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("739c5551",a,!0,{sourceMap:!1,shadowMode:!1})},3872:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"movie-score-wapper"},[t._l(t.starNum,function(e,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:t.starYellow}})}),t._l(5-t.starNum,function(e,a){return i("v-uni-image",{key:a,staticClass:"star-ico",attrs:{src:t.starGray}})}),i("v-uni-view",{staticClass:"movie-score"},[t._v(t._s(t.score))])],2)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})},3970:function(t,e,i){var a=i("6387");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("54427197",a,!0,{sourceMap:!1,shadowMode:!1})},5092:function(t,e,i){"use strict";i.r(e);var a=i("f1b1"),o=i("bdee");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("1736");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"0c2980e4",null);e["default"]=r.exports},"52e5":function(t,e,i){"use strict";i.r(e);var a=i("3872"),o=i("7bea");for(var s in o)"default"!==s&&function(t){i.d(e,t,function(){return o[t]})}(s);i("bfbc");var n=i("2877"),r=Object(n["a"])(o["default"],a["a"],a["b"],!1,null,"0ba240d8",null);e["default"]=r.exports},"594a":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("6b54"),i("87b3"),i("28a5"),i("7f7f");var o=a(i("52e5")),s={data:function(){return{movieDetail:{},posterArray:[],cover:[],movieId:0}},onShareAppMessage:function(t){return{title:this.movieDetail.name,path:"pages/movie/movie?movieId="+this.movieId}},onLoad:function(t){var e=this;uni.showLoading({mask:!0,title:"努力加载中..."}),uni.showNavigationBarLoading(),this.movieId=t.movieId;var i=uni.getStorageSync("HISTORY");if(i){var a=i.split(",");a.indexOf(this.movieId.toString())>-1&&this.deleteByValue(a,this.movieId.toString()),a.unshift(this.movieId),uni.setStorageSync("HISTORY",a+"")}else{a=[];a.unshift(this.movieId),uni.setStorageSync("HISTORY",a+"")}uni.request({url:this.apiServer+"api/v1/get/filmdetail/",method:"GET",data:{movie_id:this.movieId},success:function(t){var i=uni.getStorageSync("INTEREST_FILM_ID"),a=i.split(",");for(var o in a.indexOf(t.data.id.toString())>-1?t.data.isInterest=!0:t.data.isInterest=!1,t.data.cover=e.mediaServer+t.data.cover,t.data.trailer=e.mediaServer+t.data.trailer,t.data.poster)t.data.poster[o].poster=e.mediaServer+t.data.poster[o].poster,e.posterArray.push(t.data.poster[o].poster);for(var o in t.data.actor)t.data.actor[o].photo=e.mediaServer+t.data.actor[o].photo;e.movieDetail=t.data,e.cover.push(e.movieDetail.cover)},fail:function(t){console.log(t)},complete:function(){uni.hideLoading(),uni.hideNavigationBarLoading(),uni.stopPullDownRefresh()}})},methods:{lookMe:function(t){var e=t.currentTarget.dataset.imgindex;uni.previewImage({current:this.posterArray[e],urls:this.posterArray})},lookCover:function(){uni.previewImage({urls:this.cover})},myInterest:function(){var t=this;uni.showToast({title:"已收藏",icon:"none"}),this.movieDetail.isInterest=!this.movieDetail.isInterest;var e=uni.getStorageSync("INTEREST_FILM_ID"),i=e.split(",");i.push(this.movieId),uni.setStorageSync("INTEREST_FILM_ID",i+"");var a=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/",method:"POST",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},data:{user_id:a,movie_id:this.movieId},success:function(e){200!=e.data.status&&400==e.data.status&&t.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},nomoralInterest:function(){var t=this;uni.showToast({title:"已取消收藏",icon:"none"}),this.movieDetail.isInterest=!this.movieDetail.isInterest;var e=uni.getStorageSync("INTEREST_FILM_ID"),i=e.split(",");i=this.deleteByValue(i,this.movieId),uni.setStorageSync("INTEREST_FILM_ID",i+"");var a=uni.getStorageSync("USER_ID"),o=uni.getStorageSync("AUTH_TOKEN");uni.request({url:this.apiServer+"api/v1/interest_movie/?user_id="+a+"&movie_id="+this.movieId,method:"DELETE",header:{"content-type":"application/x-www-form-urlencoded","auth-token":o},success:function(e){200!=e.data.status&&400==e.data.status&&t.relogin()},fail:function(){uni.showToast({title:"系统错误,响应超时",icon:"none"})},complete:function(){}})},deleteByValue:function(t,e){for(var i=0;i<t.length;i++)e==t[i]&&t.splice(i,1);return t}},components:{scoreComp:o.default}};e.default=s},"5e23":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("e814")),s={name:"scoreComp",data:function(){return{starNum:0,starYellow:this.mediaServer+"/media/star-yellow.png",starGray:this.mediaServer+"/media/star-gray.png"}},props:{score:0},created:function(){this.starNum=(0,o.default)(this.score/2)}};e.default=s},6387:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".movie-score-wapper[data-v-0ba240d8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.star-ico[data-v-0ba240d8]{width:%?25?%;height:%?25?%;margin-left:%?6?%;margin-top:%?6?%}.movie-score[data-v-0ba240d8]{font-size:12px;color:grey;margin-left:%?8?%}",""])},"7bea":function(t,e,i){"use strict";i.r(e);var a=i("5e23"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},bdee:function(t,e,i){"use strict";i.r(e);var a=i("594a"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=o.a},bfbc:function(t,e,i){"use strict";var a=i("3970"),o=i.n(a);o.a},f1b1:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"player"},[i("v-uni-video",{staticClass:"movie",attrs:{src:t.movieDetail.trailer,poster:t.movieDetail.poster[0].poster,controls:""}})],1),i("v-uni-view",{staticClass:"movie-info"},[i("v-uni-image",{staticClass:"cover",attrs:{src:t.movieDetail.cover,mode:"aspectFit"},on:{click:function(e){e=t.$handleEvent(e),t.lookCover(e)}}}),i("v-uni-view",{staticClass:"movie-desc"},[i("v-uni-view",{staticClass:"title"},[t._v(t._s(t.movieDetail.name))]),i("v-uni-view",{staticClass:"basic-info"},[t._v(t._s(t.movieDetail.basic_info))]),i("v-uni-view",{staticClass:"basic-info"},[t._v("原名:"+t._s(t.movieDetail.original_name))]),i("v-uni-view",{staticClass:"basic-info"},[t._v("时长:"+t._s(t.movieDetail.total_time)+"分钟")]),i("v-uni-view",{staticClass:"basic-info"},[t._v("上映时间:"+t._s(t.movieDetail.release_date)+"("+t._s(t.movieDetail.release_place)+")")]),i("v-uni-view",{staticClass:"score-block"},[i("v-uni-view",{},[i("v-uni-view",{staticClass:"big-score"},[i("v-uni-view",{staticClass:"score-words"},[t._v("综合评分")])],1),t.movieDetail.score>=0?[i("scoreComp",{attrs:{score:t.movieDetail.score}})]:t._e()],2),i("v-uni-view",{staticClass:"score-words"},[t._v(t._s(t.movieDetail.prised_count)+"人收藏")])],1)],1)],1),i("v-uni-view",{staticClass:"line-wapper"},[i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"plots-block"},[i("v-uni-view",{staticClass:"plots-wapper"},[i("v-uni-view",{staticClass:"plots-title",staticStyle:{"margin-top":"10upx"}},[t._v("剧情介绍")]),t.movieDetail.isInterest?i("v-uni-view",[i("v-uni-button",{staticClass:"button",staticStyle:{"margin-right":"30upx"},attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(e){e=t.$handleEvent(e),t.nomoralInterest(e)}}},[t._v("取消收藏")])],1):i("v-uni-view",[i("v-uni-button",{staticClass:"button",staticStyle:{"margin-right":"30upx"},attrs:{type:"primary",plain:"true",size:"mini"},on:{click:function(e){e=t.$handleEvent(e),t.myInterest(e)}}},[t._v("收藏")])],1)],1),i("v-uni-view",{},[i("v-uni-view",{staticClass:"plots-desc"},[t._v(t._s(t.movieDetail.plot_desc))])],1)],1),i("v-uni-view",{staticClass:"line-wapper"},[i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"plots-block"},[i("v-uni-view",{staticClass:"plots-title"},[t._v("演职人员")]),i("v-uni-scroll-view",{staticClass:"page-block nowrap",attrs:{"scroll-x":"true"}},t._l(t.movieDetail.actor,function(e,a){return i("v-uni-view",{key:a,staticClass:"actor"},[i("v-uni-view",{staticClass:"actor-wapper"},[i("v-uni-image",{staticClass:"actor-photo",attrs:{src:e.photo}}),i("v-uni-view",{staticClass:"actor-name"},[t._v(t._s(e.name))])],1)],1)}),1)],1),i("v-uni-view",{staticClass:"line-wapper"},[i("v-uni-view",{staticClass:"line"})],1),i("v-uni-view",{staticClass:"plots-block"},[i("v-uni-view",{staticClass:"plots-title"},[t._v("剧照")]),i("v-uni-scroll-view",{staticClass:"page-block nowrap",attrs:{"scroll-x":"true"}},t._l(t.movieDetail.poster,function(e,a){return i("v-uni-view",{key:a,staticClass:"actor"},[i("v-uni-view",{staticClass:"actor-wapper"},[i("v-uni-image",{staticClass:"actor-photo",attrs:{src:e.poster,"data-imgIndex":a,mode:"aspectFill"},on:{click:function(e){e=t.$handleEvent(e),t.lookMe(e)}}})],1)],1)}),1)],1)],1)},o=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return o})}}]);